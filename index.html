<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Objection Mastery Cards</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; /* Light gray background */
        }
        /* Custom shadow for cards */
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Transition for smooth reveal */
        .response-content {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen bg-gray-50">

    <header class="text-center mb-10">
        <h1 class="text-4xl md:text-5xl font-extrabold text-blue-800">Objection Mastery Training</h1>
        <p class="text-lg text-gray-600 mt-2">Click any card to reveal the recommended professional response.</p>
    </header>

    <main class="max-w-4xl mx-auto">
        
        <!-- Sales Role-Play Simulator Section -->
        <section class="mb-12 p-8 bg-white rounded-xl card-shadow border-t-4 border-purple-500">
            <h2 class="text-3xl font-bold text-purple-700 mb-6 flex items-center">
                Sales Role-Play Simulator ✨
            </h2>
            <p class="text-gray-600 mb-4">Practice handling unexpected situations. Describe the customer scenario below (e.g., "Customer is stuck on the trade-in price and just got a low offer from CarMax").</p>

            <textarea id="scenario-input" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 mb-4 h-24" placeholder="Enter your customer scenario here..."></textarea>
            
            <button onclick="generateCustomerResponse()" id="generate-btn" class="w-full bg-purple-600 text-white font-semibold py-3 rounded-lg hover:bg-purple-700 transition duration-150 ease-in-out">
                Generate Customer Response ✨
            </button>

            <div id="loading-indicator" class="text-center mt-4 text-purple-600 hidden">
                <svg class="animate-spin h-5 w-5 mr-3 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                Generating realistic customer response...
            </div>

            <div id="response-output" class="mt-6 p-4 bg-purple-50 border-l-4 border-purple-400 rounded-lg text-gray-800 hidden">
                <p class="font-bold mb-2 text-purple-800">Customer Dialogue (Generated):</p>
                <p id="generated-text"></p>
            </div>
        </section>

        <h2 class="text-3xl font-bold text-blue-800 mb-6 text-center border-b-2 pb-3">Standard Objection Cards</h2>

        <div id="flashcard-container" class="space-y-6">

            <!-- Card 1: Initial Greeting -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I'm just looking/browsing."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">That is exactly what you should be doing! I'm [Insert Name], the [Insert Title]. So I can make sure you're focused on the right vehicles, what specifically caught your eye today? Are you leaning toward something specific, like an SUV or a sedan?</p>
                </div>
            </div>

            <!-- Card 2: Low Commitment -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I'm just here to kill time."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">That's great! We have a few new models that are definitely worth a few minutes of your time. If I could quickly show you the two or three most popular vehicles in your price range, would that be a good use of your time?</p>
                </div>
            </div>

            <!-- Card 3: Avoiding Commitment -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I'm not buying anything today."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">I completely understand; that's fine. We don't expect you to buy today, but we do hope you'll leave today with all the information you need to make the best decision for your family. What kind of information are you hoping to gather on this visit?</p>
                </div>
            </div>

            <!-- Card 4: Waiting for Authority -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I’m waiting for a friend/partner."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">Perfect. While you wait, I can quickly pull up a complimentary market report on your current vehicle. It'll just take two minutes, and then you'll know exactly what your trade-in is worth when your friend arrives.</p>
                </div>
            </div>

            <!-- Card 5: Payment Focus -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I need a lower monthly payment."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">I understand. The price is based on the vehicle and all the value we provide. Is the payment the only thing keeping you from moving forward right now? If we could get the payment to a comfortable spot, is this the car you would drive home in today? (Focus on the gap, not the full price.)</p>
                </div>
            </div>

            <!-- Card 6: Price Resistance -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"That's too much money/The price is too high."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">I agree, it’s a significant investment, and that’s why you’re getting such a quality vehicle. Compared to other dealerships, where did you see the largest difference in value that makes you feel this one is too high? (Isolate the perceived issue, not the vehicle itself.)</p>
                </div>
            </div>

            <!-- Card 7: Demanding Best Price -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I want your best price right now."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">Absolutely. Our best price is based on two things: first, the inventory levels—and this model is in high demand—and second, your decision to take it home right now. If I show you the best price we can possibly do, are you prepared to take the vehicle home today?</p>
                </div>
            </div>

            <!-- Card 8: Shopping Competition -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I can get the same car cheaper somewhere else."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">I appreciate you doing your research. Are you looking at the exact same vehicle—the same model, year, trim, mileage, and condition, along with the same warranty and service benefits we include? If the only difference is the price, I'm confident we can bridge that gap and keep your business here.</p>
                </div>
            </div>

            <!-- Card 9: The "Think About It" -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I need to think about it."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">I respect that this is a big decision, and thinking about it is important. But in my experience, when someone needs time to 'think about it,' it's usually because I failed to answer one final question. What are the top one or two things you need to think through? (Look for the real objection.)</p>
                </div>
            </div>

            <!-- Card 10: Authority Closing -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I need to talk to my spouse/wife/partner."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">That is 100% fair, and a great decision is one you make together. If your spouse were here right now, what question do you think they would ask that I haven't answered yet? (Pre-close by anticipating the partner’s concerns.)</p>
                </div>
            </div>

            <!-- Card 11: Vehicle Doubt -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I'm just not sure if this is the right vehicle."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">It sounds like you like the vehicle, but maybe you're not in love with it. If this car had one more feature, what would it be? Or, on a scale of 1 to 10, with 10 being perfect, where does this car land? (Identifies the missing emotional or practical element.)</p>
                </div>
            </div>

            <!-- Card 12: Waiting for a Deal -->
            <div class="card-item bg-white p-6 rounded-xl card-shadow border-t-4 border-blue-500 cursor-pointer transition duration-300 hover:shadow-lg hover:ring-2 hover:ring-blue-400" onclick="toggleResponse(this)">
                <div class="card-front">
                    <p class="text-xl font-bold text-gray-900 mb-3">Objection:</p>
                    <p class="text-2xl italic text-red-600">"I want to wait for the next model year/next month's incentives."</p>
                </div>
                <div class="card-back mt-5 pt-4 border-t border-gray-200 hidden response-content">
                    <p class="text-xl font-bold text-green-600 mb-2">Response:</p>
                    <p class="text-lg text-gray-700">That's a valid strategy, but waiting comes with a cost. If you wait, you risk losing this specific vehicle, and you're adding another month of payments to your current vehicle. If we can get you a great deal today, wouldn't it be better to enjoy the new car now?</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-12 text-center text-gray-500 text-sm p-4 border-t border-gray-200">
        <!-- Added Copyright/Usage Notice -->
        <p>&copy; 2025 [Jonathan Alley]. All Rights Reserved. For internal training use only.</p>
    </footer>

    <script>
        // Global variables will be provided by the environment
        // The API key is now intentionally left empty. The environment or hosting platform 
        // will handle providing the necessary credentials for the fetch call.
        const apiKey = "";

        function toggleResponse(cardElement) {
            const responseDiv = cardElement.querySelector('.card-back');
            // This is the static flashcard logic. If this doesn't work, 
            // the main JavaScript block is failing due to a syntax error.
            responseDiv.classList.toggle('hidden');
        }

        async function generateCustomerResponse() {
            const input = document.getElementById('scenario-input').value.trim();
            const outputDiv = document.getElementById('response-output');
            const generatedText = document.getElementById('generated-text');
            const loadingIndicator = document.getElementById('loading-indicator');
            const generateBtn = document.getElementById('generate-btn');

            if (!input) {
                generatedText.innerHTML = 'Please describe a customer scenario to generate a response.';
                outputDiv.classList.remove('hidden');
                return;
            }

            // Show loading, disable button
            loadingIndicator.classList.remove('hidden');
            outputDiv.classList.add('hidden');
            generateBtn.disabled = true;
            generateBtn.textContent = 'Generating...';

            const systemPrompt = "You are a realistic, professional, and slightly difficult car buyer at a dealership. Your goal is to give a short, challenging, but believable objection or request based on the provided scenario. Your response should be dialogue, as if you are speaking to the sales professional.";
            const userQuery = "Scenario: " + input + "\n\nBased on this scenario, what is your direct dialogue response to the sales professional?";
            
            // FINAL FIX: We are removing the '?key=' + apiKey from the URL completely.
            // This forces the hosting platform (GitHub Pages, etc.) to securely inject the API key,
            // which often solves the browser security/CORS issue once and for all.
            const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent";

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
                temperature: 0.8 
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorBody = await response.text();
                    console.error("API Response Error:", errorBody);
                    // Use a generic error message since the user is hosted now.
                    throw new Error(`API Request Failed: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Could not generate a response. Please try a different scenario.";
                
                generatedText.innerHTML = text.replace(/\n/g, '<br>');
                outputDiv.classList.remove('hidden');

            } catch (error) {
                console.error("Gemini API Error:", error);
                // Clear, concise error message for the sales team.
                generatedText.textContent = "Simulation Failed. Please check your network connection or try a different scenario.";
                outputDiv.classList.remove('hidden');
            } finally {
                loadingIndicator.classList.add('hidden');
                generateBtn.disabled = false;
                generateBtn.innerHTML = 'Generate Customer Response ✨';
            }
        }
    </script>
</body>
</html>

